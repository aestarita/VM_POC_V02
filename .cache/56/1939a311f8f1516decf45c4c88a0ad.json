{"id":"node_modules/@snap/camera-kit/lib/extensions/LensSources.js","dependencies":[{"name":"C:\\Users\\aesta\\Documents\\GitHub\\VM_POC_V02\\node_modules\\@snap\\camera-kit\\lib\\extensions\\LensSources.js.map","includedInParent":true,"mtime":1689894620979},{"name":"C:\\Users\\aesta\\Documents\\GitHub\\VM_POC_V02\\package.json","includedInParent":true,"mtime":1689971043690},{"name":"C:\\Users\\aesta\\Documents\\GitHub\\VM_POC_V02\\node_modules\\@snap\\camera-kit\\package.json","includedInParent":true,"mtime":1689894620849},{"name":"tslib","loc":{"line":1,"column":26,"index":26},"parent":"C:\\Users\\aesta\\Documents\\GitHub\\VM_POC_V02\\node_modules\\@snap\\camera-kit\\lib\\extensions\\LensSources.js","resolved":"C:\\Users\\aesta\\Documents\\GitHub\\VM_POC_V02\\node_modules\\@snap\\camera-kit\\node_modules\\tslib\\tslib.es6.js"},{"name":"../common/typeguards","loc":{"line":2,"column":28,"index":63},"parent":"C:\\Users\\aesta\\Documents\\GitHub\\VM_POC_V02\\node_modules\\@snap\\camera-kit\\lib\\extensions\\LensSources.js","resolved":"C:\\Users\\aesta\\Documents\\GitHub\\VM_POC_V02\\node_modules\\@snap\\camera-kit\\lib\\common\\typeguards.js"},{"name":"../dependency-injection/Injectable","loc":{"line":3,"column":27,"index":114},"parent":"C:\\Users\\aesta\\Documents\\GitHub\\VM_POC_V02\\node_modules\\@snap\\camera-kit\\lib\\extensions\\LensSources.js","resolved":"C:\\Users\\aesta\\Documents\\GitHub\\VM_POC_V02\\node_modules\\@snap\\camera-kit\\lib\\dependency-injection\\Injectable.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.lensSourcesFactory = exports.LensSources = void 0;\nvar _tslib = require(\"tslib\");\nvar _typeguards = require(\"../common/typeguards\");\nvar _Injectable = require(\"../dependency-injection/Injectable\");\n/**\n * A chain of {@link LensSource} objects to be registered in Camera Kit on bootstrap. Camera Kit evaluates all\n * registered {@link LensSource} objects for a group ownership during Lens retrieval ({@link CameraKit.lenses}).\n * And if a source claims the ownership, its {@link LensSource.getLens} or {@link LensSource.getLensGroup}\n * methods are called.\n */\nclass LensSources {\n  /**\n   * Creates an instance of Lens sources.\n   * @param fallbackSources A fallback sources if given {@link LensSource} doesn't claim a group ownership.\n   * @param source Lens source.\n   */\n  constructor(fallbackSources, source) {\n    this.fallbackSources = fallbackSources;\n    this.source = source;\n  }\n  /**\n   * Returns empty LensSources instance.\n   * @internal\n   */\n  static empty() {\n    // NOTE: we want to keep LensSources constructor to require arguments\n    // but internally we don't need them for the base case\n    // @ts-expect-error\n    return new LensSources();\n  }\n  /**\n   * Returns envelopes of lens/groups taking into account group ownership.\n   * @internal\n   * @param groupId A group to test ownership and get lens envelopes of.\n   * @param lensId An optional lens ID to narrow envelopes down to a single lens.\n   * @returns Envelopes or undefined if not applicable.\n   */\n  retrieveLenses({\n    groupId,\n    lensId\n  }) {\n    var _a, _b;\n    return (0, _tslib.__awaiter)(this, void 0, void 0, function* () {\n      if ((_a = this.source) === null || _a === void 0 ? void 0 : _a.isGroupOwner(groupId)) {\n        return (0, _typeguards.isUndefined)(lensId) ? this.source.getLensGroup(groupId) : this.source.getLens(lensId, groupId).then(envelope => [envelope]);\n      }\n      return (_b = this.fallbackSources) === null || _b === void 0 ? void 0 : _b.retrieveLenses({\n        groupId,\n        lensId\n      });\n    });\n  }\n}\nexports.LensSources = LensSources;\nconst lensSourcesFactory = (0, _Injectable.Injectable)(\"lensSources\", () => LensSources.empty());\nexports.lensSourcesFactory = lensSourcesFactory;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":8,"column":0}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":8,"column":4}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":8,"column":15}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":8,"column":18}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":8,"column":25}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":9,"column":0}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":9,"column":4}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":9,"column":15}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":9,"column":18}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":9,"column":25}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":10,"column":0}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":34,"column":6},"generated":{"line":16,"column":0}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":34,"column":13},"generated":{"line":16,"column":6}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":34,"column":24},"generated":{"line":16,"column":17}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":34,"column":24},"generated":{"line":16,"column":18}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":17,"column":2}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":43,"column":4},"generated":{"line":22,"column":2}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":43,"column":4},"generated":{"line":22,"column":13}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":43,"column":16},"generated":{"line":22,"column":14}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":43,"column":44},"generated":{"line":22,"column":29}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":43,"column":46},"generated":{"line":22,"column":31}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":43,"column":64},"generated":{"line":22,"column":37}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":43,"column":64},"generated":{"line":22,"column":39}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":23,"column":4}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":44,"column":12},"generated":{"line":23,"column":8}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":44,"column":13},"generated":{"line":23,"column":9}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":44,"column":28},"generated":{"line":23,"column":24}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":44,"column":31},"generated":{"line":23,"column":27}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":44,"column":46},"generated":{"line":23,"column":42}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":45,"column":8},"generated":{"line":24,"column":4}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":45,"column":12},"generated":{"line":24,"column":8}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":45,"column":13},"generated":{"line":24,"column":9}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":45,"column":19},"generated":{"line":24,"column":15}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":24,"column":18}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":45,"column":28},"generated":{"line":24,"column":24}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":46,"column":4},"generated":{"line":25,"column":2}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":48,"column":4},"generated":{"line":26,"column":2}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":52,"column":4},"generated":{"line":30,"column":2}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":52,"column":11},"generated":{"line":30,"column":9}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":52,"column":16},"generated":{"line":30,"column":14}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":52,"column":16},"generated":{"line":30,"column":15}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":52,"column":16},"generated":{"line":30,"column":17}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":31,"column":4}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":54,"column":8},"generated":{"line":32,"column":4}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":33,"column":4}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":56,"column":8},"generated":{"line":34,"column":4}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":56,"column":15},"generated":{"line":34,"column":11}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":56,"column":19},"generated":{"line":34,"column":15}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":56,"column":30},"generated":{"line":34,"column":26}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":56,"column":30},"generated":{"line":34,"column":27}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":56,"column":32},"generated":{"line":34,"column":28}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":35,"column":2}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":59,"column":4},"generated":{"line":36,"column":2}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":66,"column":10},"generated":{"line":43,"column":2}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":66,"column":24},"generated":{"line":43,"column":16}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":66,"column":25},"generated":{"line":43,"column":17}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":66,"column":27},"generated":{"line":44,"column":4}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":66,"column":34},"generated":{"line":44,"column":11}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":66,"column":36},"generated":{"line":45,"column":4}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":66,"column":42},"generated":{"line":46,"column":2}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":66,"column":82},"generated":{"line":46,"column":3}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":66,"column":82},"generated":{"line":46,"column":5}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":8},"generated":{"line":49,"column":6}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":12},"generated":{"line":49,"column":10}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":12},"generated":{"line":49,"column":11}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":12},"generated":{"line":49,"column":13}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":12},"generated":{"line":49,"column":16}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":16},"generated":{"line":49,"column":20}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":17},"generated":{"line":49,"column":21}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":23},"generated":{"line":49,"column":27}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":23},"generated":{"line":49,"column":33}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":23},"generated":{"line":49,"column":37}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":23},"generated":{"line":49,"column":41}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":23},"generated":{"line":49,"column":43}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":23},"generated":{"line":49,"column":48}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":23},"generated":{"line":49,"column":53}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":23},"generated":{"line":49,"column":54}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":23},"generated":{"line":49,"column":57}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":23},"generated":{"line":49,"column":62}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":23},"generated":{"line":49,"column":63}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":23},"generated":{"line":49,"column":66}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":23},"generated":{"line":49,"column":68}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":25},"generated":{"line":49,"column":69}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":37},"generated":{"line":49,"column":81}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":38},"generated":{"line":49,"column":82}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":45},"generated":{"line":49,"column":89}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":46},"generated":{"line":49,"column":90}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":67,"column":48},"generated":{"line":49,"column":92}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":68,"column":12},"generated":{"line":50,"column":8}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":68,"column":19},"generated":{"line":50,"column":15}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":68,"column":19},"generated":{"line":50,"column":19}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":68,"column":30},"generated":{"line":50,"column":42}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":68,"column":31},"generated":{"line":50,"column":44}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":68,"column":37},"generated":{"line":50,"column":50}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":68,"column":38},"generated":{"line":50,"column":51}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":69,"column":18},"generated":{"line":50,"column":54}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":69,"column":22},"generated":{"line":50,"column":58}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":69,"column":23},"generated":{"line":50,"column":59}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":69,"column":29},"generated":{"line":50,"column":65}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":69,"column":30},"generated":{"line":50,"column":66}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":69,"column":42},"generated":{"line":50,"column":78}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":69,"column":43},"generated":{"line":50,"column":79}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":69,"column":50},"generated":{"line":50,"column":86}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":69,"column":51},"generated":{"line":50,"column":87}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":18},"generated":{"line":50,"column":90}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":22},"generated":{"line":50,"column":94}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":23},"generated":{"line":50,"column":95}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":29},"generated":{"line":50,"column":101}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":30},"generated":{"line":50,"column":102}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":37},"generated":{"line":50,"column":109}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":38},"generated":{"line":50,"column":110}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":44},"generated":{"line":50,"column":116}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":46},"generated":{"line":50,"column":118}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":53},"generated":{"line":50,"column":125}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":54},"generated":{"line":50,"column":126}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":55},"generated":{"line":50,"column":127}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":59},"generated":{"line":50,"column":131}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":61},"generated":{"line":50,"column":132}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":69},"generated":{"line":50,"column":140}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":74},"generated":{"line":50,"column":144}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":75},"generated":{"line":50,"column":145}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":83},"generated":{"line":50,"column":153}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":84},"generated":{"line":50,"column":154}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":70,"column":85},"generated":{"line":50,"column":155}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":8},"generated":{"line":52,"column":6}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":15},"generated":{"line":52,"column":13}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":15},"generated":{"line":52,"column":14}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":15},"generated":{"line":52,"column":16}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":15},"generated":{"line":52,"column":19}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":19},"generated":{"line":52,"column":23}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":20},"generated":{"line":52,"column":24}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":52,"column":39}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":52,"column":45}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":52,"column":49}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":52,"column":53}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":52,"column":55}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":52,"column":60}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":52,"column":65}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":52,"column":66}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":52,"column":69}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":52,"column":74}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":52,"column":75}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":52,"column":78}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":52,"column":80}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":37},"generated":{"line":52,"column":81}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":51},"generated":{"line":52,"column":95}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":52},"generated":{"line":52,"column":96}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":54},"generated":{"line":53,"column":8}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":61},"generated":{"line":53,"column":15}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":63},"generated":{"line":54,"column":8}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":69},"generated":{"line":55,"column":6}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":71},"generated":{"line":55,"column":7}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":72,"column":72},"generated":{"line":55,"column":8}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":74,"column":1},"generated":{"line":59,"column":0}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":74,"column":1},"generated":{"line":59,"column":7}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":74,"column":1},"generated":{"line":59,"column":8}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":74,"column":1},"generated":{"line":59,"column":19}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":74,"column":1},"generated":{"line":59,"column":22}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":74,"column":1},"generated":{"line":59,"column":33}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":7},"generated":{"line":60,"column":0}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":13},"generated":{"line":60,"column":6}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":31},"generated":{"line":60,"column":24}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":34},"generated":{"line":60,"column":27}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":34},"generated":{"line":60,"column":31}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":44},"generated":{"line":60,"column":53}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":45},"generated":{"line":60,"column":55}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":58},"generated":{"line":60,"column":68}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":60},"generated":{"line":60,"column":70}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":66},"generated":{"line":60,"column":76}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":77},"generated":{"line":60,"column":87}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":78},"generated":{"line":60,"column":88}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":83},"generated":{"line":60,"column":93}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":83},"generated":{"line":60,"column":94}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":85},"generated":{"line":60,"column":95}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":86},"generated":{"line":60,"column":96}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":87},"generated":{"line":61,"column":0}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":87},"generated":{"line":61,"column":7}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":87},"generated":{"line":61,"column":8}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":87},"generated":{"line":61,"column":26}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":87},"generated":{"line":61,"column":29}},{"source":"../../src/extensions/LensSources.ts","name":null,"original":{"line":76,"column":87},"generated":{"line":61,"column":47}}],"sources":{"../../src/extensions/LensSources.ts":"import { isUndefined } from \"../common/typeguards\";\nimport { Injectable } from \"../dependency-injection/Injectable\";\n\n/**\n * A source of a lens group.\n */\nexport interface LensSource {\n    /**\n     * Whether the given source is able to load lenses of the supplied group.\n     * @param groupId Group ID to check.\n     */\n    isGroupOwner(groupId: string): boolean;\n\n    /**\n     * Returns an encoded lens object.\n     * @param lensId Lens ID to get.\n     * @param groupId Group ID the lens belongs to.\n     */\n    getLens(lensId: string, groupId: string): Promise<ArrayBuffer>;\n\n    /**\n     * Returns encoded lens objects.\n     * @param groupId Group ID to get lenses of.\n     */\n    getLensGroup(groupId: string): Promise<ArrayBuffer[]>;\n}\n\n/**\n * A chain of {@link LensSource} objects to be registered in Camera Kit on bootstrap. Camera Kit evaluates all\n * registered {@link LensSource} objects for a group ownership during Lens retrieval ({@link CameraKit.lenses}).\n * And if a source claims the ownership, its {@link LensSource.getLens} or {@link LensSource.getLensGroup}\n * methods are called.\n */\nexport class LensSources {\n    private readonly fallbackSources: LensSources | undefined;\n    private readonly source: LensSource | undefined;\n\n    /**\n     * Creates an instance of Lens sources.\n     * @param fallbackSources A fallback sources if given {@link LensSource} doesn't claim a group ownership.\n     * @param source Lens source.\n     */\n    constructor(fallbackSources: LensSources, source: LensSource) {\n        this.fallbackSources = fallbackSources;\n        this.source = source;\n    }\n\n    /**\n     * Returns empty LensSources instance.\n     * @internal\n     */\n    static empty() {\n        // NOTE: we want to keep LensSources constructor to require arguments\n        // but internally we don't need them for the base case\n        // @ts-expect-error\n        return new LensSources();\n    }\n\n    /**\n     * Returns envelopes of lens/groups taking into account group ownership.\n     * @internal\n     * @param groupId A group to test ownership and get lens envelopes of.\n     * @param lensId An optional lens ID to narrow envelopes down to a single lens.\n     * @returns Envelopes or undefined if not applicable.\n     */\n    async retrieveLenses({ groupId, lensId }: { groupId: string; lensId?: string }): Promise<ArrayBuffer[] | void> {\n        if (this.source?.isGroupOwner(groupId)) {\n            return isUndefined(lensId)\n                ? this.source.getLensGroup(groupId)\n                : this.source.getLens(lensId, groupId).then((envelope) => [envelope]);\n        }\n        return this.fallbackSources?.retrieveLenses({ groupId, lensId });\n    }\n}\n\nexport const lensSourcesFactory = Injectable(\"lensSources\", () => LensSources.empty());\n"},"lineCount":null}},"error":null,"hash":"4b5bbebfa7fac5bff2c2dcebbd852905","cacheData":{"env":{}}}